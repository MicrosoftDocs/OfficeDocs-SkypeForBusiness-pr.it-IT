---
title: Pianificazione DNS avanzata di Edge Server per Skype for Business Server
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
audience: ITPro
ms.topic: conceptual
manager: serdars
ms.prod: skype-for-business-itpro
localization_priority: Normal
ms.collection:
- IT_Skype16
- Strat_SB_Hybrid
ms.custom: ''
ms.assetid: f3a5895f-f64f-44eb-9a5e-8d606ac1fc38
description: 'Riepilogo: scenari di revisione per le opzioni di distribuzione di Skype for Business Server. Questo argomento dovrebbe essere utile se si vuole un singolo server o si preferisce un pool di server con DNS o HLB.'
ms.openlocfilehash: 497126188b830a61804bedb44c5e50eedec11dcb
ms.sourcegitcommit: ab47ff88f51a96aaf8bc99a6303e114d41ca5c2f
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/20/2019
ms.locfileid: "36187823"
---
# <a name="advanced-edge-server-dns-planning-for-skype-for-business-server"></a><span data-ttu-id="c3e3d-104">Pianificazione DNS avanzata di Edge Server per Skype for Business Server</span><span class="sxs-lookup"><span data-stu-id="c3e3d-104">Advanced Edge Server DNS planning for Skype for Business Server</span></span>
 
<span data-ttu-id="c3e3d-105">**Riepilogo:** Scenari di revisione per le opzioni di distribuzione di Skype for Business Server.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-105">**Summary:** Review scenarios for Skype for Business Server deployment options.</span></span> <span data-ttu-id="c3e3d-106">Questo argomento dovrebbe essere utile se si vuole un singolo server o si preferisce un pool di server con DNS o HLB.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-106">Whether you want a single server or prefer a server pool with DNS or HLB, this topic should help.</span></span>
  
<span data-ttu-id="c3e3d-107">Per quanto riguarda la pianificazione DNS (Domain Name System) per Skype for Business Server, sono presenti molti fattori che potrebbero rientrare nella tua decisione.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-107">When it comes to Domain Name System (DNS) planning for Skype for Business Server, there are a lot of factors that may play into your decision.</span></span> <span data-ttu-id="c3e3d-108">Se la struttura del dominio dell'organizzazione è già in vigore, potrebbe essere necessario rivederla come procedere.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-108">If your organization's domain structure's already in place, this may be a matter of reviewing how you're going to proceed.</span></span> <span data-ttu-id="c3e3d-109">Inizieremo con gli argomenti riportati di seguito:</span><span class="sxs-lookup"><span data-stu-id="c3e3d-109">We'll begin with the topics found below:</span></span>
  
- [<span data-ttu-id="c3e3d-110">Procedura dettagliata di individuazione dei servizi per i client Skype for business</span><span class="sxs-lookup"><span data-stu-id="c3e3d-110">Walkthrough of Skype for Business clients locating services</span></span>](../../plan-your-deployment/network-requirements/advanced-edge-server-dns.md#WalkthroughOfSkype)
    
- [<span data-ttu-id="c3e3d-111">DNS split-brain</span><span class="sxs-lookup"><span data-stu-id="c3e3d-111">Split-brain DNS</span></span>](../../plan-your-deployment/network-requirements/advanced-edge-server-dns.md#SplitBrainDNS)
    
- [<span data-ttu-id="c3e3d-112">Configurazione automatica senza DNS split-brain</span><span class="sxs-lookup"><span data-stu-id="c3e3d-112">Automatic configuration without split-brain DNS</span></span>](../../plan-your-deployment/network-requirements/advanced-edge-server-dns.md#NoSplitBrainDNS)
    
- [<span data-ttu-id="c3e3d-113">Ripristino di emergenza DNS</span><span class="sxs-lookup"><span data-stu-id="c3e3d-113">DNS disaster recovery</span></span>](../../plan-your-deployment/network-requirements/advanced-edge-server-dns.md#DNSDR)
    
- [<span data-ttu-id="c3e3d-114">Bilanciamento del carico DNS</span><span class="sxs-lookup"><span data-stu-id="c3e3d-114">DNS load balancing</span></span>](../../plan-your-deployment/network-requirements/advanced-edge-server-dns.md#DNSLB)
    
## <a name="walkthrough-of-skype-for-business-clients-locating-services"></a><span data-ttu-id="c3e3d-115">Procedura dettagliata di individuazione dei servizi per i client Skype for business</span><span class="sxs-lookup"><span data-stu-id="c3e3d-115">Walkthrough of Skype for Business clients locating services</span></span>
<span data-ttu-id="c3e3d-116"><a name="WalkthroughOfSkype"> </a></span><span class="sxs-lookup"><span data-stu-id="c3e3d-116"></span></span>

<span data-ttu-id="c3e3d-117">I client Skype for business sono simili alle versioni precedenti dei client Lync nel modo in cui trovano e accedono ai servizi in Skype for Business Server.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-117">Skype for Business clients are similar to previous versions of Lync clients in how they find and access services in Skype for Business Server.</span></span> <span data-ttu-id="c3e3d-118">Questa sezione descrive in dettaglio il processo di posizione del server.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-118">This section details the server location process.</span></span>
  
1. <span data-ttu-id="c3e3d-119">lyncdiscoverinternal. \<dominio\></span><span class="sxs-lookup"><span data-stu-id="c3e3d-119">lyncdiscoverinternal.\<domain\></span></span>
    
     <span data-ttu-id="c3e3d-120">*Si tratta di un record host per il servizio di individuazione automatica dei servizi Web interni.*</span><span class="sxs-lookup"><span data-stu-id="c3e3d-120">*This is an A host record for the Autodiscover service on the internal web services.*</span></span> 
    
2. <span data-ttu-id="c3e3d-121">Lyncdiscover. \<dominio\></span><span class="sxs-lookup"><span data-stu-id="c3e3d-121">lyncdiscover.\<domain\></span></span>
    
     <span data-ttu-id="c3e3d-122">*Si tratta di un record host per il servizio di individuazione automatica dei servizi Web esterni.*</span><span class="sxs-lookup"><span data-stu-id="c3e3d-122">*This is an A host record for the Autodiscover service on the external web services.*</span></span> 
    
3. <span data-ttu-id="c3e3d-123">_sipinternaltls._tcp. \<dominio\></span><span class="sxs-lookup"><span data-stu-id="c3e3d-123">_sipinternaltls._tcp.\<domain\></span></span>
    
     <span data-ttu-id="c3e3d-124">*Si tratta di un record SRV per le connessioni TLS interne.*</span><span class="sxs-lookup"><span data-stu-id="c3e3d-124">*This is a SRV record for internal TLS connections.*</span></span> 
    
4. <span data-ttu-id="c3e3d-125">_sip._tls. \<dominio\></span><span class="sxs-lookup"><span data-stu-id="c3e3d-125">_sip._tls.\<domain\></span></span>
    
     <span data-ttu-id="c3e3d-126">*Si tratta di un record SRV per le connessioni TLS esterne.*</span><span class="sxs-lookup"><span data-stu-id="c3e3d-126">*This is a SRV record for external TLS connections.*</span></span> 
    
5. <span data-ttu-id="c3e3d-127">sipinternal. \<dominio\></span><span class="sxs-lookup"><span data-stu-id="c3e3d-127">sipinternal.\<domain\></span></span>
    
     <span data-ttu-id="c3e3d-128">*Si tratta di un record host per il pool o il Director front-end, risolvibile solo nella rete interna.*</span><span class="sxs-lookup"><span data-stu-id="c3e3d-128">*This is an A host record for the Front End pool or Director, resolvable only on the internal network.*</span></span> 
    
6. <span data-ttu-id="c3e3d-129">SIP. \<dominio\></span><span class="sxs-lookup"><span data-stu-id="c3e3d-129">sip.\<domain\></span></span>
    
     <span data-ttu-id="c3e3d-130">*Si tratta di un record host per il pool o il Director front-end, risolvibile solo nella rete interna.*</span><span class="sxs-lookup"><span data-stu-id="c3e3d-130">*This is an A host record for the Front End pool or Director, resolvable only on the internal network.*</span></span> 
    
7. <span data-ttu-id="c3e3d-131">sipexternal. \<dominio\></span><span class="sxs-lookup"><span data-stu-id="c3e3d-131">sipexternal.\<domain\></span></span>
    
     <span data-ttu-id="c3e3d-132">*Si tratta di un record host per il servizio Access Edge, quando il client è esterno.*</span><span class="sxs-lookup"><span data-stu-id="c3e3d-132">*This is an A host record for the Access Edge service, when the client is external.*</span></span> 
    
<span data-ttu-id="c3e3d-133">Il servizio di individuazione automatica è sempre favorito perché è il metodo preferito per la posizione del servizio e gli altri sono metodi di fallback.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-133">The Autodiscover service is always favored as that's the preferred method for service location, and the others are fallback methods.</span></span>
  
> [!NOTE]
> <span data-ttu-id="c3e3d-134">Quando si creano record SRV, è importante ricordare che devono puntare a un DNS a (e AAAA se si usa l'indirizzamento IPv6) nello stesso dominio in cui è stato creato il record SRV DNS.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-134">When you're creating SRV records, it's important to remember that they need to point to a DNS A (and AAAA if you're using IPv6 addressing) in the same domain in which the DNS SRV record's being created.</span></span> <span data-ttu-id="c3e3d-135">Ad esempio, se il record SRV è in contoso.com, il record A (e AAAA) punta a non può essere in fabrikam.com.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-135">For example, if they SRV record's in contoso.com, the A (and AAAA) record it points to can't be in fabrikam.com.</span></span> 
  
<span data-ttu-id="c3e3d-136">Se si è inclini a farlo, è possibile impostare il dispositivo mobile per l'individuazione manuale dei servizi.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-136">If you're inclined to do it, you can set your mobile device up for manual discovery of services.</span></span> <span data-ttu-id="c3e3d-137">In questo caso, ogni utente deve configurare le impostazioni del dispositivo mobile con gli URI del servizio di individuazione automatica interni ed esterni, inclusi il protocollo e il percorso, come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="c3e3d-137">If that's what you're looking to do, each user needs to configure their mobile device settings with the full internal and external Autodiscover service URIs, including the protocol and path, as follows:</span></span>
  
- <span data-ttu-id="c3e3d-138">Per l'accesso esterno:\<https://\>ExtPoolFQDN/Autodiscover/autodiscoverservice.svc/root</span><span class="sxs-lookup"><span data-stu-id="c3e3d-138">For external access: https://\<ExtPoolFQDN\>/Autodiscover/autodiscoverservice.svc/Root</span></span>
    
- <span data-ttu-id="c3e3d-139">Per l'accesso interno:\<https://\>IntPoolFQDN/autodiscover/autodiscover.svc/root</span><span class="sxs-lookup"><span data-stu-id="c3e3d-139">For internal access: https://\<IntPoolFQDN\>/AutoDiscover/AutoDiscover.svc/Root</span></span>
    
<span data-ttu-id="c3e3d-140">Ti consigliamo di usare l'individuazione automatica anziché l'individuazione manuale.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-140">We do recommend you use automatic discovery as opposed to manual discovery.</span></span> <span data-ttu-id="c3e3d-141">Ma se si stanno eseguendo alcuni test o risoluzione dei problemi, le impostazioni manuali possono essere molto utili.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-141">But if you're doing some troubleshooting or testing, manual settings can be very helpful.</span></span>
  
## <a name="split-brain-dns"></a><span data-ttu-id="c3e3d-142">DNS split-brain</span><span class="sxs-lookup"><span data-stu-id="c3e3d-142">Split-brain DNS</span></span>
<span data-ttu-id="c3e3d-143"><a name="SplitBrainDNS"> </a></span><span class="sxs-lookup"><span data-stu-id="c3e3d-143"></span></span>

<span data-ttu-id="c3e3d-144">Si tratta di una configurazione DNS in cui sono presenti due aree DNS con lo stesso spazio dei nomi.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-144">This is a DNS configuration where you have two DNS zones with the same namespace.</span></span> <span data-ttu-id="c3e3d-145">La prima area DNS gestisce le richieste interne, mentre la seconda zona DNS gestisce le richieste esterne.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-145">The first DNS zone handles internal requests, while the second DNS zone handles external requests.</span></span>
  
<span data-ttu-id="c3e3d-146">Perché una società può eseguire questa operazione?</span><span class="sxs-lookup"><span data-stu-id="c3e3d-146">Why would a company do this?</span></span> <span data-ttu-id="c3e3d-147">Possono avere un requisito per usare lo stesso spazio dei nomi internamente e esternamente, ma ovviamente questo porterà molti DNS SRV e un record a essere univoci per una zona o un'altra e dove c'è una duplicazione, gli indirizzi IP associati a questi record sarebbero univoci.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-147">They may have a requirement to use the same namespace internally and externally, but of course this will lead to many DNS SRV and A records being unique to one zone or another, and where there is duplication, the IP addresses associated with these records would be unique.</span></span>
  
<span data-ttu-id="c3e3d-148">Questo presenta alcune sfide.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-148">This presents some challenges.</span></span> <span data-ttu-id="c3e3d-149">La cosa più importante è che il DNS split-brain **non è supportato** per la mobilità.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-149">The most important is that split-brain DNS is **not supported** for Mobility.</span></span> <span data-ttu-id="c3e3d-150">A causa dei record DNS LyncDiscover e LyncDiscoverInternal (LyncDiscover deve essere definito nel server DNS esterno, mentre LyncDiscoverInternal deve essere definito nel server DNS interno).</span><span class="sxs-lookup"><span data-stu-id="c3e3d-150">This is because of the LyncDiscover and LyncDiscoverInternal DNS records (LyncDiscover has to be defined on you external DNS server, while LyncDiscoverInternal has to be defined on your internal DNS server).</span></span>
  
<span data-ttu-id="c3e3d-151">Verranno elencati i record DNS per le aree interne ed esterne, ma è possibile trovare esempi dettagliati nella sezione requisiti ambientali di Edge Server.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-151">We'll list the DNS records for the internal and external zones here, but you can find detailed examples on the Edge Server environmental requirements section.</span></span>
  
### <a name="internal-dns"></a><span data-ttu-id="c3e3d-152">DNS interno</span><span class="sxs-lookup"><span data-stu-id="c3e3d-152">Internal DNS</span></span>

- <span data-ttu-id="c3e3d-153">Contiene una zona DNS denominata (ad esempio) contoso.com, per la quale è autorevole.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-153">Contains a DNS zone called (for example) contoso.com, for which it's authoritative.</span></span>
    
- <span data-ttu-id="c3e3d-154">Questo contoso.com interno contiene:</span><span class="sxs-lookup"><span data-stu-id="c3e3d-154">This internal contoso.com contains:</span></span>
    
  - <span data-ttu-id="c3e3d-155">DNS A e AAAA (se si usano i record di indirizzamento IPv6) per il pool di front-end, il pool di Director o il nome del pool di Director e tutti i server interni con Skype for Business Server nella rete dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-155">DNS A and AAAA (if you're using IPv6 addressing) records for your Front End pool, Director pool or Director pool name, and all internal servers running Skype for Business Server in your organization's network.</span></span>
    
  - <span data-ttu-id="c3e3d-156">DNS A e AAAA (se si usano i record di indirizzamento IPv6) per l'interfaccia interna di Edge per ogni server Edge di Skype for Business Server nella rete perimetrale.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-156">DNS A and AAAA (if you're using IPv6 addressing) records for your Edge internal interface for each Skype for Business Server Edge Server in your perimeter network.</span></span>
    
  - <span data-ttu-id="c3e3d-157">DNS A e AAAA (se si usano i record di indirizzamento IPv6) per l'interfaccia interna di ogni server proxy inverso nella rete perimetrale ( **facoltativo** per la gestione di un proxy inverso).</span><span class="sxs-lookup"><span data-stu-id="c3e3d-157">DNS A and AAAA (if you're using IPv6 addressing) records for the internal interface of each reverse proxy server in your perimeter network (which is **optional** for management of a reverse proxy).</span></span>
    
  - <span data-ttu-id="c3e3d-158">DNS A e AAAA (se si usa l'indirizzamento IPv6) e i record SRV per la configurazione automatica del client Skype for Business Server interno ( **facoltativo** ).</span><span class="sxs-lookup"><span data-stu-id="c3e3d-158">DNS A and AAAA (if you're using IPv6 addressing) and SRV records for internal Skype for Business Server client autoconfiguration (which is **optional** ).</span></span>
    
  - <span data-ttu-id="c3e3d-159">DNS A e AAAA (se si usa l'indirizzamento IPv6) o CNAME Records per l'individuazione automatica dei servizi Web di Skype for Business Server ( **facoltativo** ).</span><span class="sxs-lookup"><span data-stu-id="c3e3d-159">DNS A and AAAA (if you're using IPv6 addressing) or CNAME records for automatic discovery of Skype for Business Server Web Services (which is **optional** ).</span></span>
    
- <span data-ttu-id="c3e3d-160">Tutte le interfacce Edge interne di Skype for Business Server nella rete perimetrale utilizzano questa zona DNS interna per la risoluzione delle query in contoso.com.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-160">All your Skype for Business Server internal Edge interfaces in your perimeter network use this internal DNS zone for resolving queries to contoso.com.</span></span>
    
- <span data-ttu-id="c3e3d-161">Tutti i server che eseguono Skype for Business Server e i client che eseguono Skype for Business Server nella rete aziendale, puntano ai server DNS interni per la risoluzione delle query in contoso.com oppure usano il file host in ogni server perimetrale ed elencano A e AAAA (se si sta usando Indirizzi IPv6) record per il server hop successivo (in particolare per il VIP del pool Director o Director, il VIP del pool Front-end o il server Standard Edition).</span><span class="sxs-lookup"><span data-stu-id="c3e3d-161">All servers running Skype for Business Server, and clients running Skype for Business Server in the corporate network, point to internal DNS servers for resolving queries to contoso.com, or they use the Host file on each Edge Server and list A and AAAA (if you're using IPv6 addressing) records for the next hop server (specifically for the Director or Director pool VIP, Front End pool VIP, or Standard Edition server).</span></span>
    
### <a name="external-dns"></a><span data-ttu-id="c3e3d-162">DNS esterno</span><span class="sxs-lookup"><span data-stu-id="c3e3d-162">External DNS</span></span>

- <span data-ttu-id="c3e3d-163">Contiene una zona DNS denominata (ad esempio) contoso.com, per la quale è autorevole.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-163">Contains a DNS zone called (for example) contoso.com, for which it's authoritative.</span></span>
    
- <span data-ttu-id="c3e3d-164">Questo contoso.com esterno contiene:</span><span class="sxs-lookup"><span data-stu-id="c3e3d-164">This external contoso.com contains:</span></span>
    
  - <span data-ttu-id="c3e3d-165">DNS A e AAAA (se si usa l'indirizzamento IPv6) o CNAME Records per l'individuazione automatica dei servizi Web di Skype for Business Server.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-165">DNS A and AAAA (if you're using IPv6 addressing), or CNAME records, for automatic discovery of Skype for Business Server web services.</span></span> <span data-ttu-id="c3e3d-166">Questo è per l'uso con mobilità.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-166">This is for use with mobility.</span></span>
    
  - <span data-ttu-id="c3e3d-167">DNS A e AAAA (se si usa l'indirizzamento IPv6) e i record SRV per l'interfaccia esterna Edge di ogni VIP di Skype for Business Server Edge Server o di HLB (hardware load balanced) nella rete perimetrale.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-167">DNS A and AAAA (if you're using IPv6 addressing) and SRV records for the Edge external interface of each Skype for Business Server Edge Server or hardware load balanced (HLB) VIP in the perimeter network.</span></span>
    
  - <span data-ttu-id="c3e3d-168">DNS A e AAAA (se si usa l'indirizzamento IPv6) e i record SRV per l'interfaccia esterna del server proxy inverso o (VIP per un pool di server proxy inverso), nella rete perimetrale.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-168">DNS A and AAAA (if you're using IPv6 addressing) and SRV records for the external interface of the Reverse proxy server or (VIP for a pool of Reverse proxy servers), in the perimeter network.</span></span>
    
  - <span data-ttu-id="c3e3d-169">DNS A e AAAA (se si usa l'indirizzamento IPv6) e i record SRV per la configurazione automatica client di Skype for Business Server ( **facoltativo** ).</span><span class="sxs-lookup"><span data-stu-id="c3e3d-169">DNS A and AAAA (if you're using IPv6 addressing) and SRV records for Skype for Business Server client autoconfiguration ( **optional** ).</span></span>
    
## <a name="automatic-configuration-without-split-brain-dns"></a><span data-ttu-id="c3e3d-170">Configurazione automatica senza DNS split-brain</span><span class="sxs-lookup"><span data-stu-id="c3e3d-170">Automatic configuration without split-brain DNS</span></span>
<span data-ttu-id="c3e3d-171"><a name="NoSplitBrainDNS"> </a></span><span class="sxs-lookup"><span data-stu-id="c3e3d-171"></span></span>

<span data-ttu-id="c3e3d-172">Se non si usa il DNS split-brain, la configurazione automatica interna dei client che usano Skype for business non funziona a meno che non si stia usando una delle soluzioni alternative disponibili.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-172">If you don't use split-brain DNS, internal automatic configuration of clients running Skype for Business won't work unless you're using one of the workarounds we have here.</span></span> <span data-ttu-id="c3e3d-173">Perché no?</span><span class="sxs-lookup"><span data-stu-id="c3e3d-173">Why not?</span></span> <span data-ttu-id="c3e3d-174">Poiché Skype for Business Server richiede che l'URI SIP dell'utente corrisponda al dominio del pool Front-End designato per la configurazione automatica.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-174">Because Skype for Business Server requires the user's SIP URI to match the domain of the Front End pool designated for automatic configuration.</span></span> <span data-ttu-id="c3e3d-175">Questa operazione non è cambiata rispetto alle versioni precedenti di Lync Server.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-175">This hasn't changed from earlier versions of Lync Server.</span></span>
  
<span data-ttu-id="c3e3d-176">Quindi, se si usano due domini SIP in uso, è necessario questi record SRV DNS:</span><span class="sxs-lookup"><span data-stu-id="c3e3d-176">So, if you have two SIP domains in use, you'd need these DNS SRV records:</span></span>
  
- <span data-ttu-id="c3e3d-177">_sipinternaltls. _tcp. contoso. com.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-177">_sipinternaltls._tcp.contoso.com.</span></span> <span data-ttu-id="c3e3d-178">86400 IN SRV 0 0 5061 pool01.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-178">86400 IN SRV 0 0 5061 pool01.contoso.com</span></span>
    
     <span data-ttu-id="c3e3d-179">*Se un utente accede come bob@contoso.com, questo record funzionerebbe per la configurazione automatica, dato che il dominio SIP dell'utente corrisponde al dominio del pool Front-End (contoso.com).*</span><span class="sxs-lookup"><span data-stu-id="c3e3d-179">*If a user signs in as bob@contoso.com, this record would work for automatic configuration, as the user's SIP domain matches the domain of the Front End pool (contoso.com).*</span></span> 
    
- <span data-ttu-id="c3e3d-180">_sipinternaltls. _tcp. fabrikam. com.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-180">_sipinternaltls._tcp.fabrikam.com.</span></span> <span data-ttu-id="c3e3d-181">86400 IN SRV 0 0 5061 pool01.fabrikam.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-181">86400 IN SRV 0 0 5061 pool01.fabrikam.com</span></span>
    
     <span data-ttu-id="c3e3d-182">*Se un utente accede come alice@fabrikam.com, questo record funzionerebbe per la configurazione automatica del secondo dominio, anche in questo caso perché il dominio SIP corrisponde al pool Front-end per il dominio.*</span><span class="sxs-lookup"><span data-stu-id="c3e3d-182">*If a user signs in as alice@fabrikam.com, this record would work for automatic configuration of the second domain, again because the SIP domain matches the Front End pool for that domain.*</span></span> 
    
<span data-ttu-id="c3e3d-183">Per eseguire l'esempio più avanti, non funzionerebbe:</span><span class="sxs-lookup"><span data-stu-id="c3e3d-183">To take the example further, this would not work:</span></span>
  
- <span data-ttu-id="c3e3d-184">_sipinternaltls. _tcp. litwareinc. com.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-184">_sipinternaltls._tcp.litwareinc.com.</span></span> <span data-ttu-id="c3e3d-185">86400 IN SRV 0 0 5061 pool01.fabrikam.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-185">86400 IN SRV 0 0 5061 pool01.fabrikam.com</span></span>
    
     <span data-ttu-id="c3e3d-186">*Un utente che effettua l'accesso come tim@litwareinc.com non funziona per la configurazione automatica, perché il proprio dominio SIP (litwareinc.com) non corrisponde al dominio nel pool (fabrikam.com).*</span><span class="sxs-lookup"><span data-stu-id="c3e3d-186">*A user signing in as tim@litwareinc.com won't work for automatic configuration, because his SIP domain (litwareinc.com) doesn't match the domain in the pool (fabrikam.com).*</span></span> 
    
<span data-ttu-id="c3e3d-187">Quindi, ora che sappiamo tutto questo, se hai bisogno di requisiti automatici per i clienti Skype for business senza DNS split-brain, hai queste opzioni:</span><span class="sxs-lookup"><span data-stu-id="c3e3d-187">So now that we know all that, if you need automatic requirement for your Skype for Business clients without split-brain DNS, you have these options:</span></span>
  
- <span data-ttu-id="c3e3d-188">**Oggetti Criteri di gruppo**</span><span class="sxs-lookup"><span data-stu-id="c3e3d-188">**Group Policy Objects**</span></span>
    
    <span data-ttu-id="c3e3d-189">Puoi usare gli oggetti Criteri di gruppo per popolare i valori del server corretti.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-189">You can use Group Policy Objects (GPOs) to populate the correct server values.</span></span>
    
    > [!NOTE]
    > <span data-ttu-id="c3e3d-190">Questa opzione non consente la configurazione automatica, ma automatizza la configurazione manuale.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-190">This option doesn't enable automatic configuration, but it does automate manual configuration.</span></span> <span data-ttu-id="c3e3d-191">Se questo approccio viene usato, i record SRV associati alla configurazione automatica non sono obbligatori.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-191">If this approach is used, the SRV records associated with automatic configuration aren't required.</span></span> 
  
- <span data-ttu-id="c3e3d-192">**Zona interna corrispondente**</span><span class="sxs-lookup"><span data-stu-id="c3e3d-192">**Matching internal zone**</span></span>
    
    <span data-ttu-id="c3e3d-193">È necessario creare una zona nel DNS interno che corrisponda alla zona DNS esterna, ad esempio contoso.com, e quindi creare record DNS A (e AAAA se si usa l'indirizzo IPv6) che corrispondono al pool di Skype for Business Server usato per l'automazione configurazione.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-193">You'll need to create a zone in your internal DNS that matches your external DNS zone (for example, contoso.com), and then create DNS A (and AAAA if you're using IPv6 addressing) records that correspond to the Skype for Business Server pool used for automatic configuration.</span></span>
    
    <span data-ttu-id="c3e3d-194">Ad esempio, se si ha un utente ospitato in pool01.contoso.net, ma si accede a Skype for business come bob@contoso.com, creare una zona DNS interna denominata contoso.com e al suo interno è necessario creare un record DNS A (e AAAA se l'indirizzo IPv6 viene usato) per pool01.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-194">For example, if you have a user homed on pool01.contoso.net, but signs into Skype for Business as bob@contoso.com, create an internal DNS zone called contoso.com, and inside it you need to create a DNS A (and AAAA if IPv6 addressing's being used) record for pool01.contoso.com.</span></span>
    
- <span data-ttu-id="c3e3d-195">**Zona interna con pin-point**</span><span class="sxs-lookup"><span data-stu-id="c3e3d-195">**Pin-point internal zone**</span></span>
    
    <span data-ttu-id="c3e3d-196">Se la creazione di un'intera area nel DNS interno non è un'opzione per l'utente, è possibile creare aree con pin point (dedicate) che corrispondono ai record SRV necessari per la configurazione automatica e popolare tali aree tramite Dnscmd. exe.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-196">If creating an entire zone in your internal DNS isn't an option for you, you can create pin-point (dedicated) zones that correspond to the SRV records required for automatic configuration, and populate those zones using dnscmd.exe.</span></span> <span data-ttu-id="c3e3d-197">Dnscmd. exe è necessario perché l'interfaccia utente DNS non supporta la creazione di aree con punti pin.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-197">Dnscmd.exe is required because the DNS user interface won't support the creation of pin-point zones.</span></span>
    
    <span data-ttu-id="c3e3d-198">Ad esempio, se il dominio SIP è contoso.com e si dispone di un pool Front-End denominato Pool01 che contiene due server front-end, sono necessarie le seguenti aree di punti pin e un record nel DNS interno:</span><span class="sxs-lookup"><span data-stu-id="c3e3d-198">For example, if your SIP domain is contoso.com, and you have a Front End pool called pool01 that contains two Front End Servers, you'll need the following pin-point zones and A records in your internal DNS:</span></span>
    
  ```
  dnscmd . /zoneadd _sipinternaltls._tcp.contoso.com. /dsprimary
  dnscmd . /recordadd _sipinternaltls._tcp.contoso.com. @ SRV 0 0 5061 pool01.contoso.com.
  dnscmd . /zoneadd pool01.contoso.com. /dsprimary
  dnscmd . /recordadd pool01.contoso.com. @ A 192.168.10.90
  dnscmd . /recordadd pool01.contoso.com. @ AAAA <IPv6 address>
  dnscmd . /recordadd pool01.contoso.com. @ A 192.168.10.91 
  dnscmd . /recordadd pool01.contoso.com. @ AAAA <IPv6 address>
  ```

    <span data-ttu-id="c3e3d-199">Potresti avere un secondo dominio SIP nell'ambiente.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-199">You may have a second SIP domain in your environment.</span></span> <span data-ttu-id="c3e3d-200">In questo caso, è necessario disporre delle aree di punti pin seguenti e di un record nel DNS interno:</span><span class="sxs-lookup"><span data-stu-id="c3e3d-200">In that case, you'll need the following pin-point zones and A records in your internal DNS:</span></span>
    
  ```
  dnscmd . /zoneadd _sipinternaltls._tcp.fabrikam.com. /dsprimary
  dnscmd . /recordadd _sipinternaltls._tcp.fabrikam.com. @ SRV 0 0 5061 pool01.fabrikam.com.
  dnscmd . /zoneadd pool01.fabrikam.com. /dsprimary
  dnscmd . /recordadd pool01.fabrikam.com. @ A 192.168.10.90
  dnscmd . /recordadd pool01.contoso.com. @ AAAA <IPv6 address>
  dnscmd . /recordadd pool01.fabrikam.com. @ A 192.168.10.91
  dnscmd . /recordadd pool01.contoso.com. @ AAAA <IPv6 address>
  ```

> [!NOTE]
> <span data-ttu-id="c3e3d-201">Verrà visualizzato il nome di dominio completo del pool di front end, ma con due indirizzi IP diversi.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-201">You'll see the Front End pool FQDN appears twice, but with two different IP addresses.</span></span> <span data-ttu-id="c3e3d-202">Questo perché viene usato il bilanciamento del carico DNS.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-202">That's because DNS load balancing is used.</span></span> <span data-ttu-id="c3e3d-203">Se viene usato HLB, c'è solo una singola voce del pool Front-end.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-203">If HLB is used, there'd only be a single Front End pool entry.</span></span> 
  
> [!NOTE]
> <span data-ttu-id="c3e3d-204">Inoltre, i valori FQDN del pool di front end cambiano tra gli esempi contoso.com e fabrikam.com, ma gli indirizzi IP rimangono invariati.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-204">Also, the Front End pool FQDN values change between the contoso.com and fabrikam.com examples, but the IP addresses remain the same.</span></span> <span data-ttu-id="c3e3d-205">Il motivo è che gli utenti che accedono da un dominio SIP useranno lo stesso pool Front-end per la configurazione automatica.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-205">That's because users who're signing in from either SIP domain will be using the same Front End pool for automatic configuration.</span></span> 
  
## <a name="dns-disaster-recovery"></a><span data-ttu-id="c3e3d-206">Ripristino di emergenza DNS</span><span class="sxs-lookup"><span data-stu-id="c3e3d-206">DNS disaster recovery</span></span>
<span data-ttu-id="c3e3d-207"><a name="DNSDR"> </a></span><span class="sxs-lookup"><span data-stu-id="c3e3d-207"></span></span>

<span data-ttu-id="c3e3d-208">Per configurare il DNS per reindirizzare il traffico Web di Skype for Business Server ai siti di disaster recover (DR) e failover, è necessario usare un provider DNS che supporti GeoDNS.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-208">To configure DNS to redirect Skype for Business Server web traffic to your disaster recover (DR) and failover sites, you need to use a DNS provider that supports GeoDNS.</span></span> <span data-ttu-id="c3e3d-209">È possibile configurare i record DNS per supportare il ripristino di emergenza, in modo che le caratteristiche che usano i servizi Web continuino anche se un intero pool Front-End scende.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-209">You can set up your DNS records to support disaster recover, so that features that use web services continue even if one entire Front End pool goes down.</span></span> <span data-ttu-id="c3e3d-210">Questa funzionalità DR supporta gli URL semplici di individuazione, riunione e accesso esterno.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-210">This DR feature supports the Autodiscover, Meet and Dial-in simple URLs.</span></span>
  
<span data-ttu-id="c3e3d-211">Si definiscono e si configurano altri record host DNS a (AAAA If using IPv6) per la risoluzione interna ed esterna dei servizi Web presso il provider di GeoDNS.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-211">You define and configure additional DNS host A (AAAA if using IPv6) records for internal and external resolution of web services at your GeoDNS provider.</span></span> <span data-ttu-id="c3e3d-212">I dettagli seguenti presumono che i pool associati, distribuiti geograficamente e che il GeoDNS supportato dal provider \*\*\*\* dispongano di Round Robin DNS **o** siano configurati per l'uso di pool1 come primari e non vengano riportati in Pool2 in caso di comunicazioni perdita o interruzione di corrente.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-212">The following details assume paired pools, geographically dispersed, and that the GeoDNS supported by your provider **either** has round-robin DNS **or** is configured to use Pool1 as primary and fails over to Pool2 in the event of any communications loss or power failure.</span></span>
  
<span data-ttu-id="c3e3d-213">Tutti i record DNS in questa tabella sono esempi.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-213">All the DNS records in this table are examples.</span></span>
  
|<span data-ttu-id="c3e3d-214">**Record GeoDNS**</span><span class="sxs-lookup"><span data-stu-id="c3e3d-214">**GeoDNS record**</span></span>|<span data-ttu-id="c3e3d-215">**Record del pool**</span><span class="sxs-lookup"><span data-stu-id="c3e3d-215">**Pool records**</span></span>|<span data-ttu-id="c3e3d-216">**Record CNAME**</span><span class="sxs-lookup"><span data-stu-id="c3e3d-216">**CNAME records**</span></span>|<span data-ttu-id="c3e3d-217">**Impostazioni DNS (selezionare un'opzione)**</span><span class="sxs-lookup"><span data-stu-id="c3e3d-217">**DNS settings (select one option)**</span></span>|
|:-----|:-----|:-----|:-----|
|<span data-ttu-id="c3e3d-218">Meet-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-218">Meet-int.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="c3e3d-219">Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-219">Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="c3e3d-220">Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-220">Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="c3e3d-221">Meet.contoso.com a Meet-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-221">Meet.contoso.com to Meet-int.geolb.contoso.com</span></span>  <br/>   <br/> |<span data-ttu-id="c3e3d-222">Round Robin tra i pool</span><span class="sxs-lookup"><span data-stu-id="c3e3d-222">Round Robin between pools</span></span>  <br/> <span data-ttu-id="c3e3d-223">**OPPURE**</span><span class="sxs-lookup"><span data-stu-id="c3e3d-223">**OR**</span></span> <br/> <span data-ttu-id="c3e3d-224">USA primaria, Connetti a secondario se si verifica un errore</span><span class="sxs-lookup"><span data-stu-id="c3e3d-224">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="c3e3d-225">Meet-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-225">Meet-ext.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="c3e3d-226">Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-226">Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="c3e3d-227">Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-227">Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="c3e3d-228">Meet.contoso.com a Meet-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-228">Meet.contoso.com to Meet-ext.geolb.contoso.com</span></span>  <br/>   <br/> |<span data-ttu-id="c3e3d-229">Round Robin tra i pool</span><span class="sxs-lookup"><span data-stu-id="c3e3d-229">Round Robin between pools</span></span>  <br/> <span data-ttu-id="c3e3d-230">**OPPURE**</span><span class="sxs-lookup"><span data-stu-id="c3e3d-230">**OR**</span></span> <br/> <span data-ttu-id="c3e3d-231">USA primaria, Connetti a secondario se si verifica un errore</span><span class="sxs-lookup"><span data-stu-id="c3e3d-231">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="c3e3d-232">Dialin-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-232">Dialin-int.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="c3e3d-233">Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-233">Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="c3e3d-234">Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-234">Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="c3e3d-235">Meet.contoso.com a Meet-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-235">Meet.contoso.com to Meet-int.geolb.contoso.com</span></span>   <br/>  <br/> |<span data-ttu-id="c3e3d-236">Round Robin tra i pool</span><span class="sxs-lookup"><span data-stu-id="c3e3d-236">Round Robin between pools</span></span>  <br/> <span data-ttu-id="c3e3d-237">**OPPURE**</span><span class="sxs-lookup"><span data-stu-id="c3e3d-237">**OR**</span></span> <br/> <span data-ttu-id="c3e3d-238">USA primaria, Connetti a secondario se si verifica un errore</span><span class="sxs-lookup"><span data-stu-id="c3e3d-238">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="c3e3d-239">Dialin-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-239">Dialin-ext.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="c3e3d-240">Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-240">Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="c3e3d-241">Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-241">Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="c3e3d-242">Meet.contoso.com a Meet-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-242">Meet.contoso.com to Meet-ext.geolb.contoso.com</span></span>  <br/>  <br/> |<span data-ttu-id="c3e3d-243">Round Robin tra i pool</span><span class="sxs-lookup"><span data-stu-id="c3e3d-243">Round Robin between pools</span></span>  <br/> <span data-ttu-id="c3e3d-244">**OPPURE**</span><span class="sxs-lookup"><span data-stu-id="c3e3d-244">**OR**</span></span> <br/> <span data-ttu-id="c3e3d-245">USA primaria, Connetti a secondario se si verifica un errore</span><span class="sxs-lookup"><span data-stu-id="c3e3d-245">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="c3e3d-246">Lyncdiscoverint-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-246">Lyncdiscoverint-int.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="c3e3d-247">Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-247">Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="c3e3d-248">Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-248">Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="c3e3d-249">Meet.contoso.com a Meet-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-249">Meet.contoso.com to Meet-int.geolb.contoso.com</span></span>   <br/>   <br/> |<span data-ttu-id="c3e3d-250">Round Robin tra i pool</span><span class="sxs-lookup"><span data-stu-id="c3e3d-250">Round Robin between pools</span></span>  <br/> <span data-ttu-id="c3e3d-251">**OPPURE**</span><span class="sxs-lookup"><span data-stu-id="c3e3d-251">**OR**</span></span> <br/> <span data-ttu-id="c3e3d-252">USA primaria, Connetti a secondario se si verifica un errore</span><span class="sxs-lookup"><span data-stu-id="c3e3d-252">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="c3e3d-253">Lyncdiscover-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-253">Lyncdiscover-ext.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="c3e3d-254">Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-254">Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="c3e3d-255">Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-255">Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="c3e3d-256">Meet.contoso.com a Meet-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-256">Meet.contoso.com to Meet-ext.geolb.contoso.com</span></span>  <br/>  <br/> |<span data-ttu-id="c3e3d-257">Round Robin tra i pool</span><span class="sxs-lookup"><span data-stu-id="c3e3d-257">Round Robin between pools</span></span>  <br/> <span data-ttu-id="c3e3d-258">**OPPURE**</span><span class="sxs-lookup"><span data-stu-id="c3e3d-258">**OR**</span></span> <br/> <span data-ttu-id="c3e3d-259">USA primaria, Connetti a secondario se si verifica un errore</span><span class="sxs-lookup"><span data-stu-id="c3e3d-259">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="c3e3d-260">Scheduler-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-260">Scheduler-int.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="c3e3d-261">Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-261">Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="c3e3d-262">Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-262">Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="c3e3d-263">Meet.contoso.com a Meet-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-263">Meet.contoso.com to Meet-int.geolb.contoso.com</span></span>   <br/>  <br/> |<span data-ttu-id="c3e3d-264">Round Robin tra i pool</span><span class="sxs-lookup"><span data-stu-id="c3e3d-264">Round Robin between pools</span></span>  <br/> <span data-ttu-id="c3e3d-265">**OPPURE**</span><span class="sxs-lookup"><span data-stu-id="c3e3d-265">**OR**</span></span> <br/> <span data-ttu-id="c3e3d-266">USA primaria, Connetti a secondario se si verifica un errore</span><span class="sxs-lookup"><span data-stu-id="c3e3d-266">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="c3e3d-267">Scheduler-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-267">Scheduler-ext.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="c3e3d-268">Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-268">Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="c3e3d-269">Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-269">Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="c3e3d-270">Meet.contoso.com a Meet-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-270">Meet.contoso.com to Meet-ext.geolb.contoso.com</span></span>   <br/>  <br/> |<span data-ttu-id="c3e3d-271">Round Robin tra i pool</span><span class="sxs-lookup"><span data-stu-id="c3e3d-271">Round Robin between pools</span></span>  <br/> <span data-ttu-id="c3e3d-272">**OPPURE**</span><span class="sxs-lookup"><span data-stu-id="c3e3d-272">**OR**</span></span> <br/> <span data-ttu-id="c3e3d-273">USA primaria, Connetti a secondario se si verifica un errore</span><span class="sxs-lookup"><span data-stu-id="c3e3d-273">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
   
## <a name="dns-load-balancing"></a><span data-ttu-id="c3e3d-274">Bilanciamento del carico DNS</span><span class="sxs-lookup"><span data-stu-id="c3e3d-274">DNS load balancing</span></span>
<span data-ttu-id="c3e3d-275"><a name="DNSLB"> </a></span><span class="sxs-lookup"><span data-stu-id="c3e3d-275"></span></span>

<span data-ttu-id="c3e3d-276">Il bilanciamento del carico DNS viene in genere implementato a livello di applicazione.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-276">DNS load balancing is usually implemented at the application level.</span></span> <span data-ttu-id="c3e3d-277">L'applicazione (ad esempio, un client che esegue Skype for business) Cerca di connettersi a un server in un pool connettendosi a uno degli indirizzi IP restituiti dalla query di record DNS A e AAAA (se si usa l'indirizzamento IPv6) per il nome di dominio completo del pool.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-277">The application (for example, a client running Skype for Business), tries to connect to a server in a pool by connecting to one of the IP addresses returned from the DNS A and AAAA (if IPv6 addressing is used) record query for the pool FQDN.</span></span>
  
<span data-ttu-id="c3e3d-278">Se ad esempio sono presenti tre server front-end in un pool denominato pool01.contoso.com, si verificheranno le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="c3e3d-278">For example, if there are three Front End Servers in a pool named pool01.contoso.com, the following would happen:</span></span>
  
- <span data-ttu-id="c3e3d-279">Client che eseguono Skype for business query DNS per pool01.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-279">Clients running Skype for Business query DNS for pool01.contoso.com.</span></span> <span data-ttu-id="c3e3d-280">La query restituisce tre indirizzi IP e li memorizza nella cache come indicato di seguito (in un ordine):</span><span class="sxs-lookup"><span data-stu-id="c3e3d-280">The query returns three IP addresses and caches them as follows (in some order):</span></span>
    
   |||
   |:-----|:-----|
   |<span data-ttu-id="c3e3d-281">pool01.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-281">pool01.contoso.com</span></span>  <br/> |<span data-ttu-id="c3e3d-282">192.168.10.90</span><span class="sxs-lookup"><span data-stu-id="c3e3d-282">192.168.10.90</span></span>  <br/> |
   |<span data-ttu-id="c3e3d-283">pool01.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-283">pool01.contoso.com</span></span>  <br/> |<span data-ttu-id="c3e3d-284">192.168.10.91</span><span class="sxs-lookup"><span data-stu-id="c3e3d-284">192.168.10.91</span></span>  <br/> |
   |<span data-ttu-id="c3e3d-285">pool01.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c3e3d-285">pool01.contoso.com</span></span>  <br/> |<span data-ttu-id="c3e3d-286">192.168.10.92</span><span class="sxs-lookup"><span data-stu-id="c3e3d-286">192.168.10.92</span></span>  <br/> |
   
- <span data-ttu-id="c3e3d-287">Il client cerca di stabilire una connessione TCP a uno degli indirizzi IP.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-287">The client tries to establish a TCP connection to one of the IP addresses.</span></span> <span data-ttu-id="c3e3d-288">Se l'operazione non riesce, cercherà l'indirizzo IP successivo memorizzato nella cache da tale elenco.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-288">If that fails, it'll try the next IP address it's cached from that list.</span></span>
    
- <span data-ttu-id="c3e3d-289">Se la connessione TCP riesce, il client negozia TLS per connettersi al registrar principale in pool01.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-289">If the TCP connection succeeds, the client negotiates TLS to connect to the primary registrar on pool01.contoso.com.</span></span>
    
- <span data-ttu-id="c3e3d-290">Se il client cerca tutte le voci memorizzate nella cache senza una connessione riuscita, l'utente riceve una notifica che non è disponibile al momento nessun server che esegue Skype for Business Server.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-290">If the client tries all cached entries without a successful connection, the user receives a notification that no servers running Skype for Business Server are available at the moment.</span></span>
    
> [!NOTE]
> <span data-ttu-id="c3e3d-291">Il bilanciamento del carico basato su DNS è diverso da DNS round robin (DNS RR), che in genere si riferisce al bilanciamento del carico facendo affidamento sul DNS per assegnare un ordine diverso agli indirizzi IP per i server nel pool.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-291">DNS-based load balancing is different from DNS round robin (DNS RR), which typically refers to load balancing by relying on DNS to give a different order of IP addresses for the servers in your pool.</span></span> <span data-ttu-id="c3e3d-292">In genere, DNS RR Abilita la distribuzione del carico, ma non consente di abilitare il failover.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-292">Typically, DNS RR enables load distribution, but it won't allow you to enable failover.</span></span> <span data-ttu-id="c3e3d-293">Se ad esempio la connessione all'indirizzo IP restituito dalla query DNS A (o AAAA in uno scenario IPv6) non riesce, la connessione non riuscirà.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-293">For example, if the connection to the one IP address returned by your DNS A (or AAAA in an IPv6 scenario) query fails, that connection will fail.</span></span> <span data-ttu-id="c3e3d-294">Che rende il record DNS meno affidabile del bilanciamento del carico basato su DNS.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-294">That makes DNS RR less reliable than DNS-based load balancing.</span></span> <span data-ttu-id="c3e3d-295">È comunque possibile usare il record DNS in combinazione con il bilanciamento del carico basato su DNS, se necessario.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-295">You can still use DNS RR in conjunction with DNS-based load balancing if you need to do that.</span></span> 
  
<span data-ttu-id="c3e3d-296">Si usa il bilanciamento del carico DNS per:</span><span class="sxs-lookup"><span data-stu-id="c3e3d-296">You use DNS load balancing to:</span></span>
  
- <span data-ttu-id="c3e3d-297">Bilanciamento del carico SIP da server a server per gli Edge Server.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-297">Load balance server-to-server SIP to the Edge Servers.</span></span>
    
- <span data-ttu-id="c3e3d-298">Bilanciamento del carico delle applicazioni UCAS (Unified Communication Application Services), come l'operatore automatico di conferenza, il gruppo di risposte e il parcheggio delle chiamate.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-298">Load balance Unified Communication Application Services (UCAS) applications, such as Conferencing Auto Attendant, Response Group, and Call Park.</span></span>
    
- <span data-ttu-id="c3e3d-299">Impedire le nuove connessioni alle applicazioni di UCAS (note anche come svuotamento).</span><span class="sxs-lookup"><span data-stu-id="c3e3d-299">Prevent new connections to UCAS applications (also known as draining).</span></span>
    
- <span data-ttu-id="c3e3d-300">Bilanciamento del carico tutto il traffico client-server tra client e Edge Server.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-300">Load balance all client-to-server traffic between clients and Edge Servers.</span></span>
    
<span data-ttu-id="c3e3d-301">Non è possibile usare il bilanciamento del carico DNS per:</span><span class="sxs-lookup"><span data-stu-id="c3e3d-301">You can't use DNS load balancing for:</span></span>
  
- <span data-ttu-id="c3e3d-302">Traffico Web da client a server ai server front-end o a un amministratore.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-302">Client-to-server web traffic to your Front End Servers or a Director.</span></span>
    
<span data-ttu-id="c3e3d-303">Per approfondire il modo in cui un record SRV DNS è selezionato quando i record DNS di mutiple vengono restituiti da una query, il servizio di Access Edge seleziona sempre il record con la priorità numerica più bassa e, se è necessario un tie-breaker, il peso numerico più elevato.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-303">To go a little more in-depth on how a DNS SRV record's selected when mutiple DNS records are returned by a query, the Access Edge service always picks the record with the lowest numeric priority and, if a tie-breaker is needed, the highest numeric weight.</span></span> <span data-ttu-id="c3e3d-304">Ciò è coerente con la [documentazione di Internet Engineering Task Force](https://www.ietf.org/rfc/rfc2782.txt).</span><span class="sxs-lookup"><span data-stu-id="c3e3d-304">This is consistent with [Internet Engineering Task Force documentation](https://www.ietf.org/rfc/rfc2782.txt).</span></span>
  
<span data-ttu-id="c3e3d-305">Ad esempio, se il primo record SRV DNS ha un peso di 20 e una priorità di 40, mentre il secondo record SRV DNS ha un peso di 10 e una priorità di 50, verrà scelto il primo record perché ha la priorità inferiore di 40.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-305">So, for example, if your first DNS SRV record has a weight of 20 and a priority of 40, and your second DNS SRV record has a weight of 10 and a priority of 50, the first record's going to be chosen because it has the lower priority of 40.</span></span> <span data-ttu-id="c3e3d-306">La priorità passa sempre prima e questo è l'host che verrà destinato prima a un cliente.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-306">Priority always goes first, and that's the host that a client will target first.</span></span> <span data-ttu-id="c3e3d-307">Cosa fare se sono presenti due obiettivi con la stessa priorità?</span><span class="sxs-lookup"><span data-stu-id="c3e3d-307">What if there are two targets with the same priority?</span></span> 
  
<span data-ttu-id="c3e3d-308">In questo caso, il peso viene considerato.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-308">In that case, weight comes into consideration.</span></span> <span data-ttu-id="c3e3d-309">I pesi più grandi dovrebbero avere una probabilità elevata, in questa circostanza, di essere selezionati.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-309">Larger weights should be given a high probability, in this circumstance, of being selected.</span></span> <span data-ttu-id="c3e3d-310">Gli amministratori DNS dovrebbero usare il peso 0 quando non è presente alcuna selezione del server.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-310">DNS administrators should use weight 0 when there isn't any server selection to do.</span></span> <span data-ttu-id="c3e3d-311">In presenza di record che contengono pesi superiori a 0, i record con peso 0 hanno una probabilità molto piccola di apportare la selezione.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-311">In the presence of records containing weights greater than 0, records with weight 0 have a very small chance of bring selected.</span></span>
  
<span data-ttu-id="c3e3d-312">Quindi, cosa succede se più record SRV DNS con priorità uguale e peso come restituiti?</span><span class="sxs-lookup"><span data-stu-id="c3e3d-312">So, then, what happens if multiple DNS SRV records with equal priority and weight as returned?</span></span> <span data-ttu-id="c3e3d-313">In questa situazione, il servizio Access Edge sceglierà il record SRV ottenuto dal server DNS per primo.</span><span class="sxs-lookup"><span data-stu-id="c3e3d-313">In this situation the Access Edge service will choose the SRV record that it got from the DNS server first.</span></span>
  

