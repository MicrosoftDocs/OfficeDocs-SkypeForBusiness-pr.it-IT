---
title: Configurare le applicazioni partner in Skype for Business Server 2015 ed Exchange Server
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
ms.date: 12/20/2018
audience: ITPro
ms.topic: quickstart
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: 9c3a3054-6201-433f-b128-4c49d3341370
description: "Riepilogo: configurare l'autenticazione da server a server per Exchange Server 2016 o Exchange Server 2013 e Skype for Business Server."
ms.openlocfilehash: 9512d271b23f26afcb1ef6385a1a6dd5d513c948
ms.sourcegitcommit: b1229ed5dc25a04e56aa02aab8ad3d4209559d8f
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 02/06/2020
ms.locfileid: "41797077"
---
# <a name="configure-partner-applications-in-skype-for-business-server-and-exchange-server"></a><span data-ttu-id="18a6f-103">Configurare le applicazioni partner in Skype for Business Server ed Exchange Server</span><span class="sxs-lookup"><span data-stu-id="18a6f-103">Configure partner applications in Skype for Business Server and Exchange Server</span></span>
 
<span data-ttu-id="18a6f-104">**Riepilogo:** Configurare l'autenticazione da server a server per Exchange Server 2016 o Exchange Server 2013 e Skype for Business Server.</span><span class="sxs-lookup"><span data-stu-id="18a6f-104">**Summary:** Configure server to server authentication for Exchange Server 2016 or Exchange Server 2013 and Skype for Business Server.</span></span>
  
<span data-ttu-id="18a6f-105">L'autenticazione da server a server richiede in genere due server che devono comunicare tra loro e un server token di sicurezza di terze parti.</span><span class="sxs-lookup"><span data-stu-id="18a6f-105">Server-to-server authentication usually requires two servers that need to communicate with one another and a third-party security token server.</span></span> <span data-ttu-id="18a6f-106">Se il server A e il server B devono comunicare, questi vengono in genere avviati contattando un server token e ottenendo un token di sicurezza mutuamente attendibile.</span><span class="sxs-lookup"><span data-stu-id="18a6f-106">If Server A and Server B need to communicate, then both of those servers typically start by contacting a token server and obtaining a mutually-trusted security token.</span></span> <span data-ttu-id="18a6f-107">Il server A presenta quindi il token di sicurezza al server B (e viceversa) per garantirne l'autenticità e l'attendibilità.</span><span class="sxs-lookup"><span data-stu-id="18a6f-107">Server A then presents that security token to Server B (and vice-versa) as a way to guarantee its authenticity and trustworthiness.</span></span>
  
<span data-ttu-id="18a6f-108">Tuttavia, questa è una regola generale.</span><span class="sxs-lookup"><span data-stu-id="18a6f-108">However, that's a general rule.</span></span> <span data-ttu-id="18a6f-109">Skype for Business Server, Exchange Server 2016, Exchange Server 2013 e SharePoint Server 2013 non hanno bisogno di usare un server token di terze parti quando comunicano tra loro; Questo perché questi prodotti server possono creare token di sicurezza che possono essere accettati uno dall'altro senza la necessità di un server token separato.</span><span class="sxs-lookup"><span data-stu-id="18a6f-109">Skype for Business Server, Exchange Server 2016, Exchange Server 2013, and SharePoint Server 2013 do not need to use a third-party token server when communicating with one another; that's because these server products can create security tokens that can be accepted by one another without the need for a separate token server.</span></span> <span data-ttu-id="18a6f-110">Questa funzionalità è disponibile solo in Skype for Business Server, Exchange Server 2016, Exchange Server 2013 e SharePoint Server 2013.</span><span class="sxs-lookup"><span data-stu-id="18a6f-110">(This capability is only available in Skype for Business Server, Exchange Server 2016, Exchange Server 2013, and SharePoint Server 2013.</span></span> <span data-ttu-id="18a6f-111">Se è necessario configurare l'autenticazione da server a server con altri server, inclusi altri prodotti server Microsoft, sarà necessario farlo usando un server token di terze parti.</span><span class="sxs-lookup"><span data-stu-id="18a6f-111">If you need to set up server-to-server authentication with other servers, including other Microsoft server products, then you will need to do so by using a third-party token server.)</span></span>
  
<span data-ttu-id="18a6f-112">Per configurare l'autenticazione da server a server tra Skype for Business Server ed Exchange Server, è necessario eseguire due operazioni: 1) è necessario assegnare i certificati appropriati a ogni server; e 2) è necessario configurare ogni server come applicazione partner dell'altro server: ciò significa che è necessario configurare Skype for Business Server come applicazione partner per Exchange Server e configurare Exchange Server in modo che sia un'applicazione partner per Skype for Business Server.</span><span class="sxs-lookup"><span data-stu-id="18a6f-112">In order to set up server-to-server authentication between Skype for Business Server and Exchange Server you must do two things: 1) you must assign the appropriate certificates to each server; and, 2) you must configure each server to be a partner application of the other server: that means you must configure Skype for Business Server to be a partner application for Exchange Server, and you must configure Exchange Server to be a partner application for Skype for Business Server.</span></span>
  
## <a name="configuring-skype-for-business-server-to-be-a-partner-application-for-exchange-server"></a><span data-ttu-id="18a6f-113">Configurazione di Skype for Business Server per diventare un'applicazione partner per Exchange Server</span><span class="sxs-lookup"><span data-stu-id="18a6f-113">Configuring Skype for Business Server to be a Partner Application for Exchange Server</span></span>

<span data-ttu-id="18a6f-114">Il modo più semplice per configurare Skype for Business Server come applicazione partner con Exchange Server 2016 o Exchange Server 2013 consiste nell'eseguire lo script Configure-EnterprisePartnerApplication. ps1, uno script di Windows PowerShell fornito con Exchange Server.</span><span class="sxs-lookup"><span data-stu-id="18a6f-114">The easiest way to configure Skype for Business Server to be a partner application with Exchange Server 2016 or Exchange Server 2013 is to run the Configure-EnterprisePartnerApplication.ps1 script, a Windows PowerShell script that ships with Exchange Server.</span></span> <span data-ttu-id="18a6f-115">Per eseguire questo script, devi specificare l'URL per il documento di metadati dell'autenticazione di Skype for Business Server. in genere sarà il nome di dominio completo del pool di Skype for Business Server seguito dal suffisso/Metadata/JSON/1.</span><span class="sxs-lookup"><span data-stu-id="18a6f-115">To run this script, you must provide the URL for the Skype for Business Server authentication metadata document; this will typically be the fully qualified domain name of the Skype for Business Server pool followed by the suffix /metadata/json/1.</span></span> <span data-ttu-id="18a6f-116">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="18a6f-116">For example:</span></span>
  
```console
https://atl-cs-001.litwareinc.com/metadata/json/1
```

<span data-ttu-id="18a6f-117">Per configurare Skype for Business Server come applicazione partner, aprire Exchange Management Shell ed eseguire un comando simile a questo (presupponendo che Exchange sia stato installato nell'unità C: e che usi il percorso della cartella predefinito):</span><span class="sxs-lookup"><span data-stu-id="18a6f-117">To configure Skype for Business Server as a partner application, open the Exchange Management Shell and run a command similar to this (assuming that Exchange has been installed on drive C: and that it uses the default folder path):</span></span>
  
```powershell
"C:\Program Files\Microsoft\Exchange Server\V15\Scripts\Configure-EnterprisePartnerApplication.ps1 -AuthMetaDataUrl 'https://atl-cs-001.litwareinc.com/metadata/json/1' -ApplicationType Lync"
```

<span data-ttu-id="18a6f-118">Dopo aver configurato l'applicazione partner, è consigliabile arrestare e riavviare Internet Information Services (IIS) nella cassetta postale di Exchange e nei server Accesso client.</span><span class="sxs-lookup"><span data-stu-id="18a6f-118">After configuring the partner application it is recommended that you stop and restart Internet Information Services (IIS) on your Exchange mailbox and client access servers.</span></span> <span data-ttu-id="18a6f-119">È possibile riavviare IIS usando un comando simile a questo, che riavvia il servizio nel computer ATL-Exchange-001:</span><span class="sxs-lookup"><span data-stu-id="18a6f-119">You can restart IIS by using a command similar to this, which restarts the service on the computer atl-exchange-001:</span></span>
  
```powershell
iisreset atl-exchange-001
```

<span data-ttu-id="18a6f-120">Questo comando può essere eseguito dall'interno di Exchange Management Shell o da qualsiasi altra finestra di comando eseguita in privilegi di amministratore.</span><span class="sxs-lookup"><span data-stu-id="18a6f-120">This command can be run from within the Exchange Management Shell or from any other command window run under administrator privileges.</span></span>
  
## <a name="configuring-exchange-server-to-be-a-partner-application-for-skype-for-business-server"></a><span data-ttu-id="18a6f-121">Configurazione di Exchange Server per diventare un'applicazione partner per Skype for Business Server</span><span class="sxs-lookup"><span data-stu-id="18a6f-121">Configuring Exchange Server to be a Partner Application for Skype for Business Server</span></span>

<span data-ttu-id="18a6f-122">Dopo aver configurato Skype for Business Server come applicazione partner per Exchange Server 2016 o Exchange Server 2013, è necessario configurare Exchange Server come applicazione partner per Skype for Business Server.</span><span class="sxs-lookup"><span data-stu-id="18a6f-122">After you have configured Skype for Business Server to be a partner application for Exchange Server 2016 or Exchange Server 2013, you must then configure Exchange Server to be a partner application for Skype for Business Server.</span></span> <span data-ttu-id="18a6f-123">Questa operazione può essere eseguita usando Skype for Business Server Management Shell e specificando il documento di metadati di autenticazione per Exchange. si tratta in genere dell'URI del servizio di individuazione automatica di Exchange seguito dal suffisso/Metadata/JSON/1.</span><span class="sxs-lookup"><span data-stu-id="18a6f-123">This can be done by using the Skype for Business Server Management Shell and specifying the authentication metadata document for Exchange; this will typically be the URI of the Exchange autodiscover service followed by the suffix /metadata/json/1.</span></span> <span data-ttu-id="18a6f-124">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="18a6f-124">For example:</span></span>
  
```console
https://autodiscover.litwareinc.com/autodiscover/metadata/json/1
```

<span data-ttu-id="18a6f-125">In Skype for Business Server le applicazioni partner vengono configurate usando il cmdlet [New-CsPartnerApplication](https://docs.microsoft.com/powershell/module/skype/new-cspartnerapplication?view=skype-ps) .</span><span class="sxs-lookup"><span data-stu-id="18a6f-125">In Skype for Business Server, partner applications are configured by using the [New-CsPartnerApplication](https://docs.microsoft.com/powershell/module/skype/new-cspartnerapplication?view=skype-ps) cmdlet.</span></span> <span data-ttu-id="18a6f-126">Oltre a specificare l'URI di metadati, devi anche impostare il livello di attendibilità dell'applicazione su completo. Ciò consentirà a Exchange di rappresentare se stesso e qualsiasi utente autorizzato nell'ambito.</span><span class="sxs-lookup"><span data-stu-id="18a6f-126">In addition to specifying the metadata URI you should also set the application trust level to Full; this will allow Exchange to represent both itself and any authorized user in the realm.</span></span> <span data-ttu-id="18a6f-127">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="18a6f-127">For example:</span></span>
  
```powershell
New-CsPartnerApplication -Identity Exchange -ApplicationTrustLevel Full -MetadataUrl "https://autodiscover.litwareinc.com/autodiscover/metadata/json/1"
```

<span data-ttu-id="18a6f-128">In alternativa, puoi creare un'applicazione partner copiando e modificando il codice di script trovato nella documentazione per l'autenticazione da server a server Skype for Business Server.</span><span class="sxs-lookup"><span data-stu-id="18a6f-128">Alternatively, you can create a partner application by copying and modifying the script code found in the Skype for Business Server server-to-server authentication documentation.</span></span> <span data-ttu-id="18a6f-129">Per altre informazioni, Vedi l'articolo su come [gestire l'autenticazione server-Server (OAuth) e le applicazioni partner in Skype for Business Server](../../manage/authentication/server-to-server-and-partner-applications.md) .</span><span class="sxs-lookup"><span data-stu-id="18a6f-129">See the [Manage server-to-server authentication (OAuth) and partner applications in Skype for Business Server](../../manage/authentication/server-to-server-and-partner-applications.md) article for more information.</span></span>
  
<span data-ttu-id="18a6f-130">Se sono state configurate correttamente le applicazioni partner sia per Skype for Business Server che per Exchange Server, è stata configurata anche l'autenticazione da server a server tra i due prodotti.</span><span class="sxs-lookup"><span data-stu-id="18a6f-130">If you have successfully configured partner applications for both Skype for Business Server and Exchange Server, you have also successfully configured server-to-server authentication between the two products.</span></span> <span data-ttu-id="18a6f-131">Skype for Business Server include un cmdlet di Windows PowerShell, [Test-CsExStorageConnectivity](https://docs.microsoft.com/powershell/module/skype/test-csexstorageconnectivity?view=skype-ps) che consente di verificare che l'autenticazione da server a server sia stata configurata correttamente e che il servizio di archiviazione di Skype for Business Server possa connettersi a Exchange Server.</span><span class="sxs-lookup"><span data-stu-id="18a6f-131">Skype for Business Server includes a Windows PowerShell cmdlet, [Test-CsExStorageConnectivity](https://docs.microsoft.com/powershell/module/skype/test-csexstorageconnectivity?view=skype-ps) which enables you to verify that server-to-server authentication has been correctly configured and that the Skype for Business Server Storage Service can connect to Exchange Server.</span></span> <span data-ttu-id="18a6f-132">Il cmdlet esegue la connessione alla cassetta postale di un utente di Exchange Server, scrivendo un elemento nella cartella Cronologia conversazioni per l'utente e quindi (facoltativamente) eliminando tale elemento.</span><span class="sxs-lookup"><span data-stu-id="18a6f-132">The cmdlet does this by connecting to the mailbox of an Exchange Server user, writing an item into the Conversation History folder for that user, and then (optionally) deleting that item.</span></span>
  
<span data-ttu-id="18a6f-133">Per testare l'integrazione di Skype for Business Server ed Exchange Server, eseguire un comando simile al seguente da Skype for Business Server Management Shell:</span><span class="sxs-lookup"><span data-stu-id="18a6f-133">To test the integration of Skype for Business Server and Exchange Server, run a command similar to the following from the Skype for Business Server Management Shell:</span></span>
  
```powershell
Test-CsExStorageConnectivity -SipUri "sip:kenmyer@litwareinc.com"
```

<span data-ttu-id="18a6f-134">Nel comando precedente, SipUri rappresenta l'indirizzo SIP di un utente con un account su Exchange Server; il comando non riuscirà in questo caso non è un account utente valido.</span><span class="sxs-lookup"><span data-stu-id="18a6f-134">In the preceding command, the SipUri represents the SIP address of a user with an account on Exchange Server; your command will fail in this is not a valid user account.</span></span>
  
> [!NOTE]
> <span data-ttu-id="18a6f-135">Se si riceve una risposta di 401 da questo cmdlet, è probabile che la configurazione predefinita di Exchange non includa il supporto per l'accettazione dei token OAuth.</span><span class="sxs-lookup"><span data-stu-id="18a6f-135">If you receive a 401 response from this cmdlet, it is probably because the default configuration for Exchange does not include support for accepting Oauth tokens.</span></span> <span data-ttu-id="18a6f-136">Per altre informazioni sull'uso di OAuth in Exchange, vedere [configurare l'autenticazione OAuth con SharePoint 2013 e Skype for Business Server](https://go.microsoft.com/fwlink/p/?LinkId=513103).</span><span class="sxs-lookup"><span data-stu-id="18a6f-136">For more information about using Oauth in Exchange, see [Configure OAuth authentication with SharePoint 2013 and Skype for Business Server](https://go.microsoft.com/fwlink/p/?LinkId=513103).</span></span> 
  
<span data-ttu-id="18a6f-137">Se il test ha esito positivo e la connettività è stata stabilita, è possibile procedere alla configurazione di funzionalità facoltative, ad esempio l'integrazione di archiviazione e l'archivio contatti unificato.</span><span class="sxs-lookup"><span data-stu-id="18a6f-137">If the test succeeds and connectivity has been established, you can then proceed to configure optional features such as archiving integration and the unified contact store.</span></span>
